description: |
  Recursive fields on a user.
  
  These recursive fields do not themselves contain these fields.
type: object
properties:
  guardians:
    description: |
      This user's guardians. (Only applicable if this user is of role
      type: student.)

      Guardians are not necessarily the same thing as parents: a guardian
      is not always the child's parent (e.g. they may be a foster parent
      or other relative), and a parent is not always the child's guardian
      (e.g. the family might have separated).
    type: array
    uniqueItems: true
    items:
      allOf:
        - $ref: ./user-readableFields.yaml
        - $ref: ./user-fields.yaml
    nullable: false
    example:
      - id: 25
        fullName: Janna Reed
        yearLevel: []
        role:
          id: 3
          name: Parent

  students:
    description: |
      This user's students. (Only applicable if this user is of role type:
      parent.)

      Students are not necessarily the same thing as children, for the
      same reason that guardians are not the same thing as parents.

      Generally, the guardian => student relation is symmetrical to the
      student => guardian relation.
    type: array
    uniqueItems: true
    items:
      allOf:
        - $ref: ./user-readableFields.yaml
        - $ref: ./user-fields.yaml
    nullable: false
    example: []

  impersonableUsers:
    description: |
      The users whom this user may impersonate within a Schoolbox session.

      This relation is asymmetric: A may impersonate B, but that does not
      imply that B may impersonate A.
    type: array
    uniqueItems: true
    items:
      allOf:
        - $ref: ./user-readableFields.yaml
        - $ref: ./user-fields.yaml
    nullable: false
    example:
      - id: 6
        fullName: Eden Reed
        yearLevel:
          id: 3
          name: 3
        role:
          id: 5
          name: Primary Student
